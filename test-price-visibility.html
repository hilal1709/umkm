<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Price Visibility - Omah Lumpia</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-menu-item {
            border: 2px solid #ddd;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            background: white;
        }
        .price-section {
            margin-top: 2rem;
            text-align: center;
            border: 2px dashed #ccc;
            padding: 1rem;
            background: #f9f9f9;
        }
        .price {
            display: inline-block;
            margin-top: 1rem;
            font-weight: 700;
            font-size: 1.3rem;
            color: #D32F2F;
            background: linear-gradient(135deg, #D32F2F 0%, #FF6B35 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            padding: 0.5rem 1rem;
            border: 2px solid #D32F2F;
            border-radius: 25px;
            position: relative;
            opacity: 1;
            visibility: visible;
        }
        .price-fallback {
            color: #D32F2F !important;
            -webkit-text-fill-color: initial !important;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .visible {
            background: #e8f5e8;
            color: #2e7d32;
        }
        .hidden {
            background: #ffebee;
            color: #c62828;
        }
        .info {
            background: #e3f2fd;
            color: #1976d2;
        }
        .debug-box {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Price Visibility - Omah Lumpia</h1>
        
        <div class="info status">
            <strong>Test ini untuk memastikan harga menu terlihat dengan jelas</strong>
        </div>

        <div class="test-menu-item">
            <h3>ü•ü Lumpia Original</h3>
            <p>Perpaduan sempurna rebung segar, ayam berkualitas, telur, dan wortel</p>
            <div class="price-section">
                <span class="price" id="price1">Mulai Rp 3.000</span>
            </div>
            <div id="status1" class="status info">Status: Checking...</div>
            <div id="debug1" class="debug-box">Debug info loading...</div>
        </div>

        <div class="test-menu-item">
            <h3>‚≠ê Lumpia Spesial</h3>
            <p>Menu andalan dengan isian rebung pilihan, ayam premium, dan telur segar</p>
            <div class="price-section">
                <span class="price" id="price2">Mulai Rp 4.000</span>
            </div>
            <div id="status2" class="status info">Status: Checking...</div>
            <div id="debug2" class="debug-box">Debug info loading...</div>
        </div>

        <div class="test-menu-item">
            <h3>ü•¢ Lumpia Medium</h3>
            <p>Ukuran sedang yang pas untuk camilan atau makanan ringan</p>
            <div class="price-section">
                <span class="price" id="price3">Mulai Rp 3.500</span>
            </div>
            <div id="status3" class="status info">Status: Checking...</div>
            <div id="debug3" class="debug-box">Debug info loading...</div>
        </div>

        <div class="test-menu-item">
            <h3>üîß Fallback Test</h3>
            <p>Test harga dengan fallback styling</p>
            <div class="price-section">
                <span class="price price-fallback" id="price4">Mulai Rp 2.500</span>
            </div>
            <div id="status4" class="status info">Status: Checking...</div>
            <div id="debug4" class="debug-box">Debug info loading...</div>
        </div>

        <div class="info status">
            <h3>Browser Support Info:</h3>
            <div id="browser-info">Loading...</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üß™ Price Visibility Test Started');
            
            // Check price visibility
            checkPriceVisibility();
            
            // Show browser support info
            showBrowserInfo();
            
            // Recheck every 2 seconds
            setInterval(checkPriceVisibility, 2000);
        });
        
        function checkPriceVisibility() {
            for (let i = 1; i <= 4; i++) {
                const priceElement = document.getElementById(`price${i}`);
                const statusElement = document.getElementById(`status${i}`);
                const debugElement = document.getElementById(`debug${i}`);
                
                if (priceElement && statusElement && debugElement) {
                    const style = window.getComputedStyle(priceElement);
                    
                    const isVisible = style.opacity > 0.5 && 
                                    style.visibility !== 'hidden' && 
                                    style.display !== 'none';
                    
                    const hasColor = style.color !== 'rgba(0, 0, 0, 0)' && 
                                   style.color !== 'transparent';
                    
                    const textFillColor = style.webkitTextFillColor;
                    const backgroundClip = style.webkitBackgroundClip;
                    
                    // Debug info
                    debugElement.innerHTML = `
                        Opacity: ${style.opacity}<br>
                        Visibility: ${style.visibility}<br>
                        Display: ${style.display}<br>
                        Color: ${style.color}<br>
                        Text Fill Color: ${textFillColor}<br>
                        Background Clip: ${backgroundClip}<br>
                        Font Size: ${style.fontSize}<br>
                        Font Weight: ${style.fontWeight}
                    `;
                    
                    if (isVisible && (hasColor || textFillColor === 'transparent')) {
                        statusElement.textContent = '‚úÖ Harga terlihat dengan jelas';
                        statusElement.className = 'status visible';
                    } else {
                        statusElement.textContent = '‚ùå Harga tidak terlihat atau bermasalah';
                        statusElement.className = 'status hidden';
                        
                        // Try to fix
                        console.log(`Fixing price ${i}...`);
                        priceElement.style.opacity = '1';
                        priceElement.style.visibility = 'visible';
                        priceElement.style.display = 'inline-block';
                        
                        // If gradient text doesn't work, use fallback
                        if (!hasColor && textFillColor === 'transparent') {
                            priceElement.style.color = '#D32F2F';
                            priceElement.style.webkitTextFillColor = 'initial';
                        }
                    }
                    
                    console.log(`Price ${i}:`, {
                        isVisible,
                        hasColor,
                        opacity: style.opacity,
                        color: style.color,
                        textFillColor: textFillColor
                    });
                }
            }
        }
        
        function showBrowserInfo() {
            const browserInfo = document.getElementById('browser-info');
            const supportsBackgroundClip = CSS.supports('-webkit-background-clip', 'text');
            const supportsTextFillColor = CSS.supports('-webkit-text-fill-color', 'transparent');
            
            browserInfo.innerHTML = `
                <strong>Browser:</strong> ${navigator.userAgent.split(' ').pop()}<br>
                <strong>Supports background-clip text:</strong> ${supportsBackgroundClip ? '‚úÖ Yes' : '‚ùå No'}<br>
                <strong>Supports text-fill-color:</strong> ${supportsTextFillColor ? '‚úÖ Yes' : '‚ùå No'}<br>
                <strong>Screen:</strong> ${window.innerWidth}x${window.innerHeight}<br>
                <strong>Device Pixel Ratio:</strong> ${window.devicePixelRatio}
            `;
        }
        
        // Manual fix button
        function fixAllPrices() {
            document.querySelectorAll('.price').forEach(price => {
                price.style.opacity = '1';
                price.style.visibility = 'visible';
                price.style.display = 'inline-block';
                price.style.color = '#D32F2F';
                price.style.fontWeight = '700';
                price.style.fontSize = '1.3rem';
            });
            console.log('All prices fixed manually');
        }
        
        // Add manual fix button
        const fixButton = document.createElement('button');
        fixButton.textContent = 'üîß Fix All Prices Manually';
        fixButton.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background: #D32F2F;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1000;
        `;
        fixButton.onclick = fixAllPrices;
        document.body.appendChild(fixButton);
    </script>
</body>
</html>
